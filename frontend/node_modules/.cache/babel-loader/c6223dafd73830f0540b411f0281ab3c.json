{"remainingRequest":"/Users/fengxiaoyu/Desktop/project/frontend/vue-admin-template/node_modules/babel-loader/lib/index.js!/Users/fengxiaoyu/Desktop/project/frontend/vue-admin-template/node_modules/eslint-loader/index.js??ref--13-0!/Users/fengxiaoyu/Desktop/project/frontend/vue-admin-template/src/permission.js","dependencies":[{"path":"/Users/fengxiaoyu/Desktop/project/frontend/vue-admin-template/src/permission.js","mtime":1756749439131},{"path":"/Users/fengxiaoyu/Desktop/project/frontend/vue-admin-template/babel.config.js","mtime":1756749439126},{"path":"/Users/fengxiaoyu/Desktop/project/frontend/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengxiaoyu/Desktop/project/frontend/vue-admin-template/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/fengxiaoyu/Desktop/project/frontend/vue-admin-template/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvciBmcm9tICIvVXNlcnMvZmVuZ3hpYW95dS9EZXNrdG9wL3Byb2plY3QvZnJvbnRlbmQvdnVlLWFkbWluLXRlbXBsYXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvci5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvZmVuZ3hpYW95dS9EZXNrdG9wL3Byb2plY3QvZnJvbnRlbmQvdnVlLWFkbWluLXRlbXBsYXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnLi9zdG9yZSc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOyAvLyBwcm9ncmVzcyBiYXIKaW1wb3J0ICducHJvZ3Jlc3MvbnByb2dyZXNzLmNzcyc7IC8vIHByb2dyZXNzIGJhciBzdHlsZQppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7IC8vIGdldCB0b2tlbiBmcm9tIGNvb2tpZQppbXBvcnQgZ2V0UGFnZVRpdGxlIGZyb20gJ0AvdXRpbHMvZ2V0LXBhZ2UtdGl0bGUnOwpOUHJvZ3Jlc3MuY29uZmlndXJlKHsKICBzaG93U3Bpbm5lcjogZmFsc2UKfSk7IC8vIE5Qcm9ncmVzcyBDb25maWd1cmF0aW9uCgp2YXIgd2hpdGVMaXN0ID0gWycvbG9naW4nXTsgLy8gbm8gcmVkaXJlY3Qgd2hpdGVsaXN0Cgpyb3V0ZXIuYmVmb3JlRWFjaCgvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvcigpLm0oZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIGhhc1Rva2VuLCBoYXNHZXRVc2VySW5mbywgX3Q7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yKCkudyhmdW5jdGlvbiAoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucCA9IF9jb250ZXh0Lm4pIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICAvLyBzdGFydCBwcm9ncmVzcyBiYXIKICAgICAgICAgIE5Qcm9ncmVzcy5zdGFydCgpOwoKICAgICAgICAgIC8vIHNldCBwYWdlIHRpdGxlCiAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGdldFBhZ2VUaXRsZSh0by5tZXRhLnRpdGxlKTsKCiAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0aGUgdXNlciBoYXMgbG9nZ2VkIGluCiAgICAgICAgICBoYXNUb2tlbiA9IGdldFRva2VuKCk7CiAgICAgICAgICBpZiAoIWhhc1Rva2VuKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm4gPSA3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghKHRvLnBhdGggPT09ICcvbG9naW4nKSkgewogICAgICAgICAgICBfY29udGV4dC5uID0gMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBpZiBpcyBsb2dnZWQgaW4sIHJlZGlyZWN0IHRvIHRoZSBob21lIHBhZ2UKICAgICAgICAgIG5leHQoewogICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgIH0pOwogICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgIF9jb250ZXh0Lm4gPSA2OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgaGFzR2V0VXNlckluZm8gPSBzdG9yZS5nZXR0ZXJzLm5hbWU7CiAgICAgICAgICBpZiAoIWhhc0dldFVzZXJJbmZvKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm4gPSAyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIF9jb250ZXh0Lm4gPSA2OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgX2NvbnRleHQucCA9IDI7CiAgICAgICAgICBfY29udGV4dC5uID0gMzsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9nZXRJbmZvJyk7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbmV4dCgpOwogICAgICAgICAgX2NvbnRleHQubiA9IDY7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBfY29udGV4dC5wID0gNDsKICAgICAgICAgIF90ID0gX2NvbnRleHQudjsKICAgICAgICAgIF9jb250ZXh0Lm4gPSA1OwogICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1c2VyL3Jlc2V0VG9rZW4nKTsKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBNZXNzYWdlLmVycm9yKF90IHx8ICdIYXMgRXJyb3InKTsKICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgIGNhc2UgNjoKICAgICAgICAgIF9jb250ZXh0Lm4gPSA4OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSA3OgogICAgICAgICAgLyogaGFzIG5vIHRva2VuKi8KCiAgICAgICAgICBpZiAod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgIT09IC0xKSB7CiAgICAgICAgICAgIC8vIGluIHRoZSBmcmVlIGxvZ2luIHdoaXRlbGlzdCwgZ28gZGlyZWN0bHkKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gb3RoZXIgcGFnZXMgdGhhdCBkbyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGFjY2VzcyBhcmUgcmVkaXJlY3RlZCB0byB0aGUgbG9naW4gcGFnZS4KICAgICAgICAgICAgbmV4dCgiL2xvZ2luP3JlZGlyZWN0PSIuY29uY2F0KHRvLnBhdGgpKTsKICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgIH0KICAgICAgICBjYXNlIDg6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYSgyKTsKICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCA0XV0pOwogIH0pKTsKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICAvLyBmaW5pc2ggcHJvZ3Jlc3MgYmFyCiAgTlByb2dyZXNzLmRvbmUoKTsKfSk7"},{"version":3,"names":["router","store","Message","NProgress","getToken","getPageTitle","configure","showSpinner","whiteList","beforeEach","_ref","_asyncToGenerator","_regenerator","m","_callee","to","from","next","hasToken","hasGetUserInfo","_t","w","_context","p","n","start","document","title","meta","path","done","getters","name","dispatch","v","error","concat","indexOf","a","_x","_x2","_x3","apply","arguments","afterEach"],"sources":["/Users/fengxiaoyu/Desktop/project/frontend/vue-admin-template/src/permission.js"],"sourcesContent":["import router from './router'\nimport store from './store'\nimport { Message } from 'element-ui'\nimport NProgress from 'nprogress' // progress bar\nimport 'nprogress/nprogress.css' // progress bar style\nimport { getToken } from '@/utils/auth' // get token from cookie\nimport getPageTitle from '@/utils/get-page-title'\n\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\n\nconst whiteList = ['/login'] // no redirect whitelist\n\nrouter.beforeEach(async(to, from, next) => {\n  // start progress bar\n  NProgress.start()\n\n  // set page title\n  document.title = getPageTitle(to.meta.title)\n\n  // determine whether the user has logged in\n  const hasToken = getToken()\n\n  if (hasToken) {\n    if (to.path === '/login') {\n      // if is logged in, redirect to the home page\n      next({ path: '/' })\n      NProgress.done()\n    } else {\n      const hasGetUserInfo = store.getters.name\n      if (hasGetUserInfo) {\n        next()\n      } else {\n        try {\n          // get user info\n          await store.dispatch('user/getInfo')\n\n          next()\n        } catch (error) {\n          // remove token and go to login page to re-login\n          await store.dispatch('user/resetToken')\n          Message.error(error || 'Has Error')\n          next(`/login?redirect=${to.path}`)\n          NProgress.done()\n        }\n      }\n    }\n  } else {\n    /* has no token*/\n\n    if (whiteList.indexOf(to.path) !== -1) {\n      // in the free login whitelist, go directly\n      next()\n    } else {\n      // other pages that do not have permission to access are redirected to the login page.\n      next(`/login?redirect=${to.path}`)\n      NProgress.done()\n    }\n  }\n})\n\nrouter.afterEach(() => {\n  // finish progress bar\n  NProgress.done()\n})\n"],"mappings":"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","ignoreList":[]}]}